<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <div th:replace="fragments/head :: headFragment" />
    <title>Order</title>
</head>
<body>
    <nav th:replace="fragments/navbar :: navbar" />
    <input hidden th:field="${user.userId}" id="User">
    <h1>Product catalog</h1>
    <ul id="productList">
        <li th:each="product: ${allProducts}"
            th:id="${'product' + product.getProductId()}"
            th:attr="productPrice=|${product.getPrice()}|, productName=|${product.getName()}|" >
            <span th:text="${product.name}"/>
            <span th:text="${product.euroPrice()}"/>
            <button th:attr="onclick=|addProduct(${product.getProductId()})|">+</button>
            <button th:attr="onclick=|removeProduct(${product.getProductId()})|">-</button>
            <input type="hidden" value="0" class="productCountBox" th:id="${'productCount' + product.getProductId()}" />
        </li>
    </ul>
    <h2>Bill</h2>
    <div id="billProductList">

    </div>
    <h2>
       Total Price
        <span id="totalPrice">â‚¬0,00</span>
    </h2>
    <button id="cashPayButton" onclick="doCashPayment()" style="display:none;" >
        Direct Payment
    </button>
    <button id="addPrepaidButton" onclick="addPrepaidCustomer()" style="display:none;">
        Add Prepaid Customer
    </button>

    <h1>User Search</h1>

    <form action="#" th:action="@{/order/update/{userId}(userId=${user.userId})}" th:object="${user}" method="get">
        <label for="searchUser">Search your user from the list:</label>
        <input list="userList"  id="searchUser" autocomplete="off" required>
        <datalist th:field="${user.userId}" id="userList">
            <option th:each="user: ${#lists.sort(allUsers)}" th:value="${user.username}" th:label="${user.name}"></option>
        </datalist>
    </form>
    <button id="SelectUser" onclick="SelectUser()">Select User</button>
    <button id="ShowInfoUser" onclick="showInfoSelectedUser()">Show Info User</button>
    <br>
    <label id="Customer-Choice-Label" for="Customer-Choice">The selected customer:</label>
    <input type="text" id="Customer-Choice" name="Customer-Choice"  th:field="*{user.name}" readonly>
    <p id="errorBox" style="color: red;">

    <div th:replace="fragments/head :: scriptFragment" />
    <script type="text/javascript" th:src="@{/js/order.js}" ></script>
</body>
</html>